<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ダッシュボード</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
    <style>
        .dashboard-section {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: space-between;
        }

        .dashboard-card {
            flex: 1 1 calc(50% - 10px);
            min-width: 0;
            margin-bottom: 20px;
            box-sizing: border-box;
        }

        .dashboard-title {
            font-size: 1.2rem;
            white-space: nowrap;
        }

        .btn-container {
            margin-bottom: 20px;
        }

        .btn-block-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: space-between;
        }

        .btn-block {
            flex: 1 1 calc(50% - 10px);
            margin-bottom: 10px;
        }

        .btn {
            width: 100%;
        }

        /* 小さい画面向けのスタイル */
        @media (max-width: 767px) {
            .dashboard-section {
                flex-direction: column;
            }

            .dashboard-card {
                flex: 1 1 100%;
            }

            .btn-block-container {
                flex-direction: row;
            }
        }

        /* 大きな画面向けのスタイル */
        @media (min-width: 768px) {
            .btn-block {
                flex: 1 1 calc(50% - 10px);
            }
        }
    </style>
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div th:insert="~{common/sourceList :: sourceList}"></div>
    <div th:replace="~{common/header :: header}"></div>

    <div class="container-fluid">
        <h2 class="my-4">ダッシュボード</h2>

        <!-- userLikeCount 機能をここに埋め込む -->
        <div class="dashboard-section">
            <div class="dashboard-card card text-center">
                <div class="card-header bg-primary text-white">
                    年間いいね数
                </div>
                <div class="card-body">
                    <h3 class="card-title mb-0" th:text="${annualLikeCount}">0</h3>
                </div>
                <div class="card-footer text-muted">
                    現在の年の総いいね数
                </div>
            </div>

            <div class="dashboard-card card text-center">
                <div class="card-header bg-success text-white">
                    月間いいね数
                </div>
                <div class="card-body">
                    <h3 class="card-title mb-0" th:text="${monthlyLikeCount}">0</h3>
                </div>
                <div class="card-footer text-muted">
                    現在の月の総いいね数
                </div>
            </div>
        </div>

        <!-- ボタンをダッシュボードの下に配置 -->
        <div class="btn-container">
            <div class="btn-block-container">
                <div class="btn-block">
                    <div class="mt-3">
                        ユーザー紹介
                    </div>
                    <a th:href="@{/userintroduction}" class="btn btn-primary">一覧画面へ</a>
                </div>
                <div class="btn-block">
                    <div class="mt-3">
                        月間いいねランキング
                    </div>
                    <a th:href="@{/likeranking}" class="btn btn-primary">ランキング画面へ</a>
                </div>
            </div>

            <div class="btn-block-container">
                <div class="btn-block">
                    <div class="mt-3">
                        お問い合わせ一覧
                    </div>
                    <a th:href="@{/contactlistUser}" class="btn btn-primary">お問い合わせ一覧へ</a>
                </div>
                <div class="btn-block">
                    <div class="mt-3">
                        お問い合わせ送信
                    </div>
                    <a th:href="@{/contact}" class="btn btn-primary">お問い合わせ入力画面へ</a>
                </div>
            </div>

            <div class="btn-block-container">
                <div class="btn-block">
                    <div class="mt-3">
                        プロフィール情報設定画面
                    </div>
                    <a th:href="@{/userupdate}" class="btn btn-primary">設定画面へ</a>
                </div>
                <div class="btn-block">
                    <div class="mt-3">
                        アカウント情報設定画面
                    </div>
                    <a th:href="@{/usersetting}" class="btn btn-primary">設定画面へ</a>
                </div>
            </div>
        </div>

        <!-- コメントアウトされている部分 -->
        <!-- <p>以下非表示</p> -->
        <!-- <div class="mt-3">ユーザー一覧画面</div> -->
        <!-- <a th:href="@{/userlist}" class="btn btn-primary">一覧画面へ</a> -->
        <!-- <div class="mt-3">アカウント追加画面</div> -->
        <!-- <a th:href="@{/useradd}" class="btn btn-primary">追加画面へ</a> -->
        <!-- <th:block th:if="${hasUserManageAuth}"> -->
        <!-- <div class="mt-3">ユーザー情報の管理はコチラ</div> -->
        <!-- <a href="" class="btn btn-danger">ユーザー管理画面へ</a> -->
        <!-- </th:block> -->
    </div>

    <div th:if="${successMessage}" th:text="${successMessage}" id="success-message" style="display: none;"></div>

    <script>
        $(document).ready(function() {
            var successMessage = $('#success-message').text();
            if (successMessage) {
                alert(successMessage);
            }
        });
    </script>
</body>
</html>
